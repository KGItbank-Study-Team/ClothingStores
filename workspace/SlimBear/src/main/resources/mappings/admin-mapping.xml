<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.slimbear.mapper.Admin">
 
 	<!-- 관리자(admin) -->
 	<select id="SELECT_ADMIN_BY_ID" resultType="admin">
 		SELECT * FROM admin WHERE id=#{id}
 	</select>
 	
 	
 	<!-- 상품 전체 보기 -->
 	<select id="SELECT_PRODUCT_TOTAL_LIST" resultType="productTotalListItem" >
 		SELECT p.* , count(po.order_uid) as toc, if(po.order_uid is not null, SUM(cnt), 0) as tpc 
		FROM product p LEFT JOIN 
		orderDetail po ON(p.uid=SUBSTRING_INDEX(po.prod_code,':',1))
		GROUP BY p.uid
 	</select>
 	
 
 </mapper>